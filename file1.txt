#include<stdio.h>
#include<stdlib.h>
#include<sys/types.h>
#include<sys/stat.h>
#include<fcntl.h>
#include<unistd.h>
#include<sys/wait.h>
#include<string.h>

int main(int fname,char* f[])
{
pid_t id;
int p[2];
char buff[500];
if(fname == 3)
{
pipe(f);
int sourcefile = open(f[1],0);
int copyfile = open(f[2],O_RDWR|O_CREAT|O_APPEND,0777);
if(sourcefile == -1||copyfile == -1)
{
printf("Source file is not found or enter parameters properly\n");
exit(1);
}
id = fork();
if(id < 0)
{printf("error in child creation");
}
else if(id == 0)
{
close(p[1]);
while(read(p[0],buff,sizeof(buff))>0);
{
write(copyfile,buff,strlen(buff)-1);
}
close(p[0]);
close(copyfile);
}
else
{
close(p[0]);
while(read(sourcefile,buff,sizeof(buff))>0);
{
write(p[1],buff,sizeof(buff));
}
close(p[1]);
close(sourcefile);
wait(NULL);
printf("files are copied");
}
}
else
{
printf("Enter only 2 filenames");
exit(1);
}
}
